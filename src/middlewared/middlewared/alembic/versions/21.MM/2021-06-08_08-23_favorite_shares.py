"""Favorite shares

Revision ID: 13f6c6094689
Revises: bd637e18fb0b
Create Date: 2021-06-08 08:23:22.332929+00:00

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '13f6c6094689'
down_revision = 'bd637e18fb0b'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('services_iscsitargetextent', schema=None) as batch_op:
        batch_op.add_column(sa.Column('iscsi_target_extent_favorite', sa.Boolean(), nullable=True))

    op.execute("UPDATE services_iscsitargetextent SET iscsi_target_extent_favorite = 1")

    with op.batch_alter_table('services_iscsitargetextent', schema=None) as batch_op:
        batch_op.alter_column('iscsi_target_extent_favorite',
               existing_type=sa.BOOLEAN(),
               nullable=False)

    with op.batch_alter_table('sharing_cifs_share', schema=None) as batch_op:
        batch_op.add_column(sa.Column('cifs_favorite', sa.Boolean(), nullable=True))

    op.execute("UPDATE sharing_cifs_share SET cifs_favorite = 1")

    with op.batch_alter_table('sharing_cifs_share', schema=None) as batch_op:
        batch_op.alter_column('cifs_favorite',
               existing_type=sa.BOOLEAN(),
               nullable=False)

    with op.batch_alter_table('sharing_nfs_share', schema=None) as batch_op:
        batch_op.add_column(sa.Column('nfs_favorite', sa.Boolean(), nullable=True))

    op.execute("UPDATE sharing_nfs_share SET nfs_favorite = 1")

    with op.batch_alter_table('sharing_nfs_share', schema=None) as batch_op:
        batch_op.alter_column('nfs_favorite',
               existing_type=sa.BOOLEAN(),
               nullable=False)

    with op.batch_alter_table('sharing_webdav_share', schema=None) as batch_op:
        batch_op.add_column(sa.Column('webdav_favorite', sa.Boolean(), nullable=True))

    op.execute("UPDATE sharing_webdav_share SET webdav_favorite = 1")

    with op.batch_alter_table('sharing_webdav_share', schema=None) as batch_op:
        batch_op.alter_column('webdav_favorite',
               existing_type=sa.BOOLEAN(),
               nullable=False)

    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('sharing_webdav_share', schema=None) as batch_op:
        batch_op.drop_column('webdav_favorite')

    with op.batch_alter_table('sharing_nfs_share', schema=None) as batch_op:
        batch_op.drop_column('nfs_favorite')

    with op.batch_alter_table('sharing_cifs_share', schema=None) as batch_op:
        batch_op.drop_column('cifs_favorite')

    with op.batch_alter_table('services_iscsitargetextent', schema=None) as batch_op:
        batch_op.drop_column('iscsi_target_extent_favorite')

    # ### end Alembic commands ###
